<!DOCTYPE html>
<html>

<head>

</head>
 
<body >



{"OAT:":<span id="OAT">s</span>,"RMT:":<span id="RMT">d</span>}

</body>
</html>
<script type="text/javascript" language="javascript">
 
var alreadyrun;
var OAT,RMT,DHWtank,Collector,SlabLea,battv,Polypipe,Power,Solar,Mains,AMSV,RMSV,EMSV,SMSV,CMSV,Gardenlights,ACunit,Circpump,DHWboost,Slabcirc,Econfan,Chickflap,Rooflouvre,Supply;
var URL = "https://amnon.dyndns.org/api/rest/v1/protocols/bacnet/local/objects/read-property-multiple";

function send(){
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {if (this.readyState == 4 && this.status == 200) {
var myArr = JSON.parse(xmlhttp.responseText);

 var i;for (i = 0; i < myArr.length; i++) {
document.getElementById("OAT").innerHTML = OAT =precisionRound(myArr[0].value,1);
document.getElementById("RMT").innerHTML = RMT =precisionRound(myArr[1].value,1);

}     

    
if(!alreadyrun){initial();}    
setTimeout('send()', 1500);    
   
      }};    

    xmlhttp.open("POST", URL, true);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization','Basic YWRtaW46U3luY2VsZWN0MjkxMQ==');
        var params = 
{"encode": "text",  "propertyReferences": [
{"type": "analogInput","instance": 101,"property": "presentValue"},
{"type": "analogInput","instance": 102,"property": "presentValue"},
]};
xmlhttp.send(JSON.stringify(params));

}
send();

//setTimeout('initial()', 1100);
function precisionRound(number, precision) {
  var factor = Math.pow(10, precision);
  return Math.round(number * factor) / factor;
}






</script>
