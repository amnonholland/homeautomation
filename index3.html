


<!DOCTYPE html>
<html>

<head>
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style"content="default" />
<meta name="viewport" content="initial-scale=1.0,user-scalable=no, width=device-width" />
<meta name="apple-mobile-web-app-status-bar-style" content="black">

</head>
 <style>



table, th, td {border-collapse: collapse;width: 25%; padding: 1px;}
                   }
  body,
html {
  position: fixed;
  width: 100%; 
  height: 100%;
}
body {font-size: 28px;
  color: white;
}
</style>
<body style="background-color:black" >


<table style="width:150%">
<tr><td>OAT:</td> <td> <span id="OAT"></span></td></tr>

</table>
<br><br/>




<br><br><left><a href="/homeautomation/trendlog.html">Trend Logs</a>
</center></body>
</html>
<script type="text/javascript" language="javascript">
 
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {
      // Registration was successful
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }, function(err) {
      // registration failed :(
      console.log('ServiceWorker registration failed: ', err);
    });
  });
}

    document.addEventListener('touchmove', function(e) {
    e.preventDefault();
}, { passive: false });

var alreadyrun;
var OAT,RMT,DHWtank,Collector,SlabLea,battv,Polypipe,Power,Solar,Mains,AMSV,RMSV,EMSV,SMSV,CMSV,Gardenlights,ACunit,Circpump,DHWboost,Slabcirc,Econfan,Chickflap,Rooflouvre,Supply,officeheater,walltemp;
var URL = "https://amnon.dyndns.org/api/rest/v1/protocols/bacnet/local/objects/read-property-multiple";

function send(){
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {if (this.readyState == 4 && this.status == 200) {
var myArr = JSON.parse(xmlhttp.responseText);

 var i;for (i = 0; i < myArr.length; i++) {
document.getElementById("OAT").innerHTML =precisionRound(myArr[0].value,1);


}     

    
    
setTimeout('send()', 1500);    
   
      }};    

    xmlhttp.open("POST", URL, true);
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.setRequestHeader('Authorization','Basic YWRtaW46U3luY2VsZWN0MjkxMQ==');
        var params = 
    {"encode": "text",  "propertyReferences": [
{"type": "analogInput","instance": 101,"property": "presentValue"}, //oat


]};
xmlhttp.send(JSON.stringify(params));

}
send();

function precisionRound(number, precision) {
  var factor = Math.pow(10, precision);
  return Math.round(number * factor) / factor;
}



</script>
